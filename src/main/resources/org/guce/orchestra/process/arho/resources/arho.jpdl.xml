<?xml version="1.0" encoding="UTF-8"?>
<process name="ARHO" xmlns="http://jbpm.org/4.4/jpdl">
   <start g="13,25,48,48" name="start1">
      <transition to="Initialisation"/>
   </start>
   <java class="org.guce.orchestra.process.arho.activity.Initializer" g="-14,86,92,52" method="init" name="Initialisation" var="request">
      <arg><object expr="#{incoming}"/></arg>
      <transition to="CheckInitMessageAndGenerateResponse"/>
   </java>
   <java class="org.guce.orchestra.process.arho.activity.CheckInitMessageAndGenerateResponse" g="101,91,148,52" method="execute" name="CheckInitMessageAndGenerateResponse" var="initResponse">
      <arg><object expr="#{request}"/></arg>
      <arg><object expr="#{incoming}"/></arg>
      <transition to="exclusive3"/>
   </java>
    <decision expr="#{initResponse.action}" g="266,35,48,48" name="exclusive3">
      <transition to="sendAH001" name="AH001" g="-5,-20"/>
      <transition to="sendAH001" name="AH011" g="-5,-20"/>
      <transition to="sendInitAperak" name="APERAK_C" g="-5,-20"/>
   </decision>
   <mule-send endpoint="endpoint.orchestra.bpm.in" g="356,7,92,52" expr="#{initResponse.messages}" name="sendAH001" >
      <transition to="ARHO.AH001.APERAK"/>
   </mule-send>
   <mule-send endpoint="endpoint.orchestra.bpm.in" g="356,7,92,52" expr="#{initResponse.messages}" name="sendAH004" >
      <transition to="ARHO.AH004.APERAK"/>
   </mule-send>
   <mule-send endpoint="endpoint.orchestra.bpm.in" g="244,140,92,52" expr="#{initResponse.messages}" name="sendInitAperak">
      <transition to="ARHO.AH002"/>
   </mule-send>
   <task g="108,200,133,52" name="ARHO.AH002" assignee="#{request.importateurPartner}">
      <transition to="CheckInitMessageAndGenerateResponse"/>
   </task>
   <task assignee="#{request.recieverPartner}" g="498,47,120,52" name="ARHO.AH001.APERAK">
      <transition to="CheckAperakAH001"/>
   </task>
   <java class="org.guce.orchestra.util.bpm.AcknowledgmentProcessor" g="365,91,119,52" method="processWithAck" name="CheckAperakAH001" var="ackAH001">
      <arg><object expr="#{incoming}"/></arg>
      <transition to="sendAperakAH001"/>
   </java>
   <mule-send endpoint="endpoint.orchestra.bpm.in" g="340,152,92,52" expr="#{ackAH001}" name="sendAperakAH001">
      <transition to="exclusive1"/>
   </mule-send>
   <decision g="362,224,48,48" name="exclusive1" expr="#{ackAH001.action}">
      <transition to="ARHO.AH002" name="APERAK_J" g="-5,-20"/>
      <transition to="ARHO.AH004" name="APERAK_D" g="-5,-20"/>
      <transition to="ARHO.AH001.APERAK" name="APERAK_C" g="-25,-18"/>
   </decision>
   <task g="517,127,136,52" name="ARHO.AH004"  assignee="#{request.recieverPartner}">
      <transition to="ProcessAH001Response"/>
   </task>
   <java g="651,188,138,52" name="ProcessAH001Response" class="org.guce.orchestra.process.arho.activity.ProcessAH001Response" method="execute" var="rp001Response">
      <field name="actions"><string value="AH003,AH002,AH004" /></field>
      <arg><object expr="#{request}"/></arg>
      <arg><object expr="#{incoming}"/></arg>
      <transition to="sendAH001Response"/>
   </java>
   <mule-send endpoint="endpoint.orchestra.bpm.in" g="628,302,140,52" expr="#{rp001Response.messages}" name="sendAH001Response">
      <transition to="exclusive2"/>
   </mule-send>
   <decision g="443,359,48,48" name="exclusive2" expr="#{rp001Response.action}">
      <transition to="ARHO.AH002.APERAK" name="AH002" g="-5,-20"/>
      <transition to="ARHO.AH004" name="APERAK_C" g="-5,-20"/>
      <transition to="ARHO.AH003.APERAK" name="AH003" g="-5,-20"/>
      <transition to="ARHO.AH004.APERAK" name="AH004" g="-5,-20"/>
   </decision>
   <task g="579,417,92,52" name="ARHO.AH003.APERAK" assignee="#{request.importateurPartner}">
      <transition to="ChekAperakAH003"/>
   </task>
   <java g="679,459,105,52" name="ChekAperakAH003" class="org.guce.orchestra.util.bpm.AcknowledgmentProcessor" method="processWithAck" var="ackAH003">
      <arg><object expr="#{incoming}"/></arg>
      <transition to="sendAperakAH003"/>
   </java>
   <mule-send endpoint="endpoint.orchestra.bpm.in" g="621,525,111,52"  expr="#{ackAH003}" name="sendAperakAH003">
      <transition to="end1"/>
   </mule-send>
   <task g="272,309,92,52" name="ARHO.AH002.APERAK" assignee="#{request.importateurPartner}">
      <transition to="ChekAperakAH002"/>
   </task>
   <java g="64,329,139,52" name="ChekAperakAH002" class="org.guce.orchestra.util.bpm.AcknowledgmentProcessor" method="processWithAck" var="ackAH002">
      <arg><object expr="#{incoming}"/></arg>
      <transition to="sendAperakAH002"/>
   </java>
   <mule-send endpoint="endpoint.orchestra.bpm.in" g="-4,258,127,52" expr="#{ackAH002}" name="sendAperakAH002">
      <transition to="ARHO.AH002"/>
   </mule-send>
   <task g="311,388,92,52" name="ARHO.AH004.APERAK" assignee="#{request.importateurPartner}">
      <transition to="CheckAperakAH004"/>
   </task>
   <java g="182,464,124,52" name="CheckAperakAH004" class="org.guce.orchestra.util.bpm.AcknowledgmentProcessor" method="processWithAck" var="ackAH004">
      <arg><object expr="#{incoming}"/></arg>
      <transition to="sendAperakAH004"/>
   </java>
   <mule-send endpoint="endpoint.orchestra.bpm.in" g="254,548,128,52" expr="#{ackAH004}" name="sendAperakAH004">
      <transition to="end1"/>
   </mule-send>
   <end g="511,483,48,48" name="end1"/>
</process>